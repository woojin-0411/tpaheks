{% extends 'products/base.html' %}
{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">주문 상세 내역</h2>
    
    <div class="card mb-4">
        <div class="card-header bg-white fw-bold">주문번호: No.{{ order.id }}</div>
        <div class="card-body">
            <div class="row align-items-center">
                <div class="col-md-4">
                    <img src="{{ order.product.image.url }}" class="img-fluid rounded shadow-sm" alt="상품이미지">
                </div>
                <div class="col-md-8">
                    <h4>{{ order.product.name }}</h4>
                    <p class="text-muted">옵션: {{ order.size }} | 수량: {{ order.quantity }}개</p>
                    <hr>
                    <h5>총 결제금액: ₩{{ order.total_price }}</h5>
                    <p>주문일: {{ order.created_at|date:"Y-m-d" }}</p>
                    
                    <div class="alert alert-secondary mt-3">
                        <h5 class="alert-heading"><i class="fas fa-info-circle"></i> 현재 상태: <strong>{{ order.status }}</strong></h5>
                        <hr>
                        {% if order.status == '배송중' or order.status == '배송완료' %}
                            {% if order.tracking_number %}
                                <p class="mb-0 fw-bold fs-5 text-primary">
                                    <i class="fas fa-truck"></i> {{ order.carrier }} : {{ order.tracking_number }}
                                </p>
                                <small class="text-muted">배송이 시작되었습니다. 운송장 번호로 위치를 확인해 보세요.</small>
                            {% else %}
                                <p class="mb-0">운송장 정보가 곧 업데이트될 예정입니다.</p>
                            {% endif %}
                        {% elif order.status == '제작중' %}
                            <p class="mb-0"><i class="fas fa-tools"></i> 꼼꼼하게 제작 중입니다. 조금만 기다려주세요!</p>
                        {% else %}
                            <p class="mb-0">주문을 확인 중입니다. 결제/제작 단계에서 상세 정보가 표시됩니다.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="text-center">
        <a href="{% url 'products:product_list' %}" class="btn btn-outline-secondary">쇼핑 계속하기</a>
    </div>
</div>
{% endblock %}